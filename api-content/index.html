{"posts":[{"title":"Android WebView白屏检测","content":"提供webview的白屏检测功能 在项目中经常会使用到WebView来加载网页。需要增加WebView的白屏检测来监控质量。 样例代码 只提供检测功能 过程简述：逐行扫描法，首先获取一个WebView的bitmap，然后取(0,0)坐标的像素。创建一个等于bitmap宽度的数组，填充满这个像素值，然后逐行遍历，一但有不相等的，则认为非白屏 /** * 白屏 */ private const val BLANK_SCREEN = 1 /** * 非白屏 */ private const val NORMAL_SCREEN = 2 /** * 白屏检测遇到异常 */ private const val DETECT_FAIL = 3 fun isWebViewBlank(webView: WebView?): Int { if(webView == null){ retrun DETECT_FAIL } if(Looper.myLooper() != Looper.getMainLooper()){ return DETECT_FAIL } val oldValue = webView.isDrawingCacheEnable try{ if(!oldValue){ webView.isDrawingCacheEnable = true } //获取webview当前显示在屏幕上部分的截图 val tmpMap = webView.drawingCache //检测bitmap是否白屏 val detector = PixBlankDetector() return if (detector.doDetect(tmpMap)) BLANK_SCREEN else NORMAL_SCREEN } catch(e: Throwable){ return DETECT_FAIL }finally{ if(!oldValue){ webView.isDrawingCacheEnable = false } } } 接下来的白屏检测的核心类PixBlankDetector class PixBlankDetector { fun doDetect(bitmap: Bitmap?): Boolean { if(bitmap == null){ return true } val width = bitmap.width val height = bitmap.height if(width &gt; 0 &amp;&amp; height &gt; 0){ val originPix = bitmap.getPixel(0,0) val target = IntArray(width) Arrays.fill(target,originPix) val source = IntArray(width) var isWhiteScreen = true for(col in 0 until height){ bitmap.getPixels(source,0,width,0,col,width,1) if(!Arrays.equals(target,source)){ isWhiteScreen = false break } } return isWhiteScreen } return false } } ","link":"https://simple-wxt.github.io/post/android-webview-bai-ping-jian-ce/"},{"title":"Hello Gridea","content":"👏 欢迎使用 Gridea ！ ✍️ Gridea 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ... Github Gridea 主页 示例网站 特性👇 📝 你可以使用最酷的 Markdown 语法，进行快速创作 🌉 你可以给文章配上精美的封面图和在文章任意位置插入图片 🏷️ 你可以对文章进行标签分组 📋 你可以自定义菜单，甚至可以创建外部链接菜单 💻 你可以在 Windows，MacOS 或 Linux 设备上使用此客户端 🌎 你可以使用 𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌 或 Coding Pages 向世界展示，未来将支持更多平台 💬 你可以进行简单的配置，接入 Gitalk 或 DisqusJS 评论系统 🇬🇧 你可以使用中文简体或英语 🌁 你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力 🖥 你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步 🌱 当然 Gridea 还很年轻，有很多不足，但请相信，它会不停向前 🏃 未来，它一定会成为你离不开的伙伴 尽情发挥你的才华吧！ 😘 Enjoy~ ","link":"https://simple-wxt.github.io/post/hello-gridea/"}]}